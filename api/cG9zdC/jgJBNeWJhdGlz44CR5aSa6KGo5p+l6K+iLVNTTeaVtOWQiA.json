{"title":"【Mybatis】多表查询&SSM整合","date":"2019-09-10T01:34:25.000Z","thumbnail":null,"link":"post/【Mybatis】多表查询-SSM整合","tags":["Mybatis"],"categories":["奇客工具"],"updated":"2019-09-10T01:38:32.635Z","content":"<h3 id=\"1-Mybatis多表查询\">1.Mybatis多表查询<a href=\"post/【Mybatis】多表查询-SSM整合#1-Mybatis多表查询\"></a></h3><h4 id=\"1-1-一对一查询\">1.1 一对一查询<a href=\"post/【Mybatis】多表查询-SSM整合#1-1-一对一查询\"></a></h4><h5 id=\"1-1-1-一对一查询的模型\">1.1.1 一对一查询的模型<a href=\"post/【Mybatis】多表查询-SSM整合#1-1-1-一对一查询的模型\"></a></h5><p>用户表和订单表的关系为，一个用户有多个订单，一个订单只从属于一个用户</p>\n<p>一对一查询的需求：查询一个订单，与此同时查询出该订单所属的用户</p>\n<p><img src=\"https://i.loli.net/2019/09/09/WfIVcxw27ngQkPJ.png\" alt class=\"article-img\"></p>\n<h5 id=\"1-1-2一对一查询的语句\">1.1.2一对一查询的语句<a href=\"post/【Mybatis】多表查询-SSM整合#1-1-2一对一查询的语句\"></a></h5><p>对应的sql语句：select *  from orders o,user u where o.uid=u.id;</p>\n<p>查询的结果如下：</p>\n<p><img src=\"https://i.loli.net/2019/09/09/wjE5GKkxDRFQUmL.png\" alt class=\"article-img\"></p>\n<h5 id=\"1-1-3-创建Order和User实体\">1.1.3 创建Order和User实体<a href=\"post/【Mybatis】多表查询-SSM整合#1-1-3-创建Order和User实体\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Order</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date ordertime;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">double</span> total;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//代表当前订单从属于哪一个客户</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> User user;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String username;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date birthday;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"1-1-4-创建OrderMapper接口\">1.1.4 创建OrderMapper接口<a href=\"post/【Mybatis】多表查询-SSM整合#1-1-4-创建OrderMapper接口\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">OrderMapper</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\">List&lt;Order&gt; <span class=\"title\">findAll</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"1-1-5-配置OrderMapper-xml\">1.1.5 配置OrderMapper.xml<a href=\"post/【Mybatis】多表查询-SSM整合#1-1-5-配置OrderMapper-xml\"></a></h5><figure class=\"highlight xml\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">\"com.itheima.mapper.OrderMapper\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">\"orderMap\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"com.itheima.domain.Order\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"uid\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"user.id\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"username\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"user.username\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"user.password\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"birthday\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"user.birthday\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">\"findAll\"</span> <span class=\"attr\">resultMap</span>=<span class=\"string\">\"orderMap\"</span>&gt;</span></span><br><span class=\"line\">        select * from orders o,user u where o.uid=u.id</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<p>其中<resultmap>还可以配置如下：</resultmap></p>\n<figure class=\"highlight xml\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">\"orderMap\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"com.itheima.domain.Order\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">\"id\"</span> <span class=\"attr\">column</span>=<span class=\"string\">\"id\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">\"ordertime\"</span> <span class=\"attr\">column</span>=<span class=\"string\">\"ordertime\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">\"total\"</span> <span class=\"attr\">column</span>=<span class=\"string\">\"total\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">association</span> <span class=\"attr\">property</span>=<span class=\"string\">\"user\"</span> <span class=\"attr\">javaType</span>=<span class=\"string\">\"com.itheima.domain.User\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"uid\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"id\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"username\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"username\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"password\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"birthday\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"birthday\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">association</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"1-1-6-测试结果\">1.1.6 测试结果<a href=\"post/【Mybatis】多表查询-SSM整合#1-1-6-测试结果\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">OrderMapper mapper = sqlSession.getMapper(OrderMapper.class);</span><br><span class=\"line\">List&lt;Order&gt; all = mapper.findAll();</span><br><span class=\"line\"><span class=\"keyword\">for</span>(Order order : all)&#123;</span><br><span class=\"line\">    System.out.println(order);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p><img src=\"https://i.loli.net/2019/09/09/aNcIG4HsOPigXAd.png\" alt class=\"article-img\"></p>\n<h4 id=\"1-2-一对多查询\">1.2 一对多查询<a href=\"post/【Mybatis】多表查询-SSM整合#1-2-一对多查询\"></a></h4><h5 id=\"1-2-1-一对多查询的模型\">1.2.1 一对多查询的模型<a href=\"post/【Mybatis】多表查询-SSM整合#1-2-1-一对多查询的模型\"></a></h5><p>用户表和订单表的关系为，一个用户有多个订单，一个订单只从属于一个用户</p>\n<p>一对多查询的需求：查询一个用户，与此同时查询出该用户具有的订单</p>\n<p>  <img src=\"https://i.loli.net/2019/09/09/WfIVcxw27ngQkPJ.png\" alt class=\"article-img\"></p>\n<h5 id=\"1-2-2-一对多查询的语句\">1.2.2 一对多查询的语句<a href=\"post/【Mybatis】多表查询-SSM整合#1-2-2-一对多查询的语句\"></a></h5><p>对应的sql语句：select *,o.id oid from user u left join orders o on u.id=o.uid;</p>\n<p>查询的结果如下：</p>\n<p><img src=\"https://i.loli.net/2019/09/09/xypDPrtlzW3R52M.png\" alt class=\"article-img\"></p>\n<h5 id=\"1-2-3-修改User实体\">1.2.3 修改User实体<a href=\"post/【Mybatis】多表查询-SSM整合#1-2-3-修改User实体\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Order</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date ordertime;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">double</span> total;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//代表当前订单从属于哪一个客户</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> User user;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String username;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date birthday;</span><br><span class=\"line\">    <span class=\"comment\">//代表当前用户具备哪些订单</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Order&gt; orderList;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"1-2-4-创建UserMapper接口\">1.2.4 创建UserMapper接口<a href=\"post/【Mybatis】多表查询-SSM整合#1-2-4-创建UserMapper接口\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UserMapper</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\">List&lt;User&gt; <span class=\"title\">findAll</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"1-2-5-配置UserMapper-xml\">1.2.5 配置UserMapper.xml<a href=\"post/【Mybatis】多表查询-SSM整合#1-2-5-配置UserMapper-xml\"></a></h5><figure class=\"highlight xml\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">\"com.itheima.mapper.UserMapper\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">\"userMap\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"com.itheima.domain.User\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"id\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"id\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"username\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"username\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"password\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"birthday\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"birthday\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">collection</span> <span class=\"attr\">property</span>=<span class=\"string\">\"orderList\"</span> <span class=\"attr\">ofType</span>=<span class=\"string\">\"com.itheima.domain.Order\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"oid\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"id\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"ordertime\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"ordertime\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"total\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"total\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">collection</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">\"findAll\"</span> <span class=\"attr\">resultMap</span>=<span class=\"string\">\"userMap\"</span>&gt;</span></span><br><span class=\"line\">        select *,o.id oid from user u left join orders o on u.id=o.uid</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"1-2-6-测试结果\">1.2.6 测试结果<a href=\"post/【Mybatis】多表查询-SSM整合#1-2-6-测试结果\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class=\"line\">List&lt;User&gt; all = mapper.findAll();</span><br><span class=\"line\"><span class=\"keyword\">for</span>(User user : all)&#123;</span><br><span class=\"line\">    System.out.println(user.getUsername());</span><br><span class=\"line\">    List&lt;Order&gt; orderList = user.getOrderList();</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Order order : orderList)&#123;</span><br><span class=\"line\">        System.out.println(order);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"----------------------------------\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p><img src=\"https://i.loli.net/2019/09/09/4LW6US5QiadRlqt.png\" alt class=\"article-img\"></p>\n<h4 id=\"1-3-多对多查询\">1.3 多对多查询<a href=\"post/【Mybatis】多表查询-SSM整合#1-3-多对多查询\"></a></h4><h5 id=\"1-3-1-多对多查询的模型\">1.3.1 多对多查询的模型<a href=\"post/【Mybatis】多表查询-SSM整合#1-3-1-多对多查询的模型\"></a></h5><p>用户表和角色表的关系为，一个用户有多个角色，一个角色被多个用户使用</p>\n<p>多对多查询的需求：查询用户同时查询出该用户的所有角色</p>\n<p><img src=\"https://i.loli.net/2019/09/09/NjtqgYfCv18zIyo.png\" alt class=\"article-img\"></p>\n<h5 id=\"1-3-2-多对多查询的语句\">1.3.2 多对多查询的语句<a href=\"post/【Mybatis】多表查询-SSM整合#1-3-2-多对多查询的语句\"></a></h5><p>对应的sql语句：select u.<em>,r.</em>,r.id rid from user u left join user_role ur on u.id=ur.user_id</p>\n<p> inner join role r on ur.role_id=r.id;</p>\n<p>查询的结果如下：</p>\n<p><img src=\"https://i.loli.net/2019/09/09/lPd6Ecjqt7MsZnY.png\" alt class=\"article-img\"></p>\n<h5 id=\"1-3-3-创建Role实体，修改User实体\">1.3.3 创建Role实体，修改User实体<a href=\"post/【Mybatis】多表查询-SSM整合#1-3-3-创建Role实体，修改User实体\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String username;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date birthday;</span><br><span class=\"line\">    <span class=\"comment\">//代表当前用户具备哪些订单</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Order&gt; orderList;</span><br><span class=\"line\">    <span class=\"comment\">//代表当前用户具备哪些角色</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Role&gt; roleList;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Role</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String rolename;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"1-3-4-添加UserMapper接口方法\">1.3.4  添加UserMapper接口方法<a href=\"post/【Mybatis】多表查询-SSM整合#1-3-4-添加UserMapper接口方法\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">List&lt;User&gt; <span class=\"title\">findAllUserAndRole</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"1-3-5-配置UserMapper-xml\">1.3.5 配置UserMapper.xml<a href=\"post/【Mybatis】多表查询-SSM整合#1-3-5-配置UserMapper-xml\"></a></h5><figure class=\"highlight xml\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">\"userRoleMap\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"com.itheima.domain.User\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"id\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"id\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"username\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"username\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"password\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"birthday\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"birthday\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">collection</span> <span class=\"attr\">property</span>=<span class=\"string\">\"roleList\"</span> <span class=\"attr\">ofType</span>=<span class=\"string\">\"com.itheima.domain.Role\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"rid\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"id\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">\"rolename\"</span> <span class=\"attr\">property</span>=<span class=\"string\">\"rolename\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">collection</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">\"findAllUserAndRole\"</span> <span class=\"attr\">resultMap</span>=<span class=\"string\">\"userRoleMap\"</span>&gt;</span></span><br><span class=\"line\">    select u.*,r.*,r.id rid from user u left join user_role ur on u.id=ur.user_id</span><br><span class=\"line\">    inner join role r on ur.role_id=r.id</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"1-3-6-测试结果\">1.3.6 测试结果<a href=\"post/【Mybatis】多表查询-SSM整合#1-3-6-测试结果\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class=\"line\">List&lt;User&gt; all = mapper.findAllUserAndRole();</span><br><span class=\"line\"><span class=\"keyword\">for</span>(User user : all)&#123;</span><br><span class=\"line\">    System.out.println(user.getUsername());</span><br><span class=\"line\">    List&lt;Role&gt; roleList = user.getRoleList();</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Role role : roleList)&#123;</span><br><span class=\"line\">        System.out.println(role);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"----------------------------------\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p><img src=\"https://i.loli.net/2019/09/09/9xwQcJyVnGU5m7r.png\" alt class=\"article-img\"></p>\n<h4 id=\"1-4-知识小结\">1.4 知识小结<a href=\"post/【Mybatis】多表查询-SSM整合#1-4-知识小结\"></a></h4><p>MyBatis多表配置方式：</p>\n<p><strong>一对一配置：使用<resultmap>做配置</resultmap></strong></p>\n<p><strong>一对多配置：使用<resultmap>+<collection>做配置</collection></resultmap></strong></p>\n<p><strong>多对多配置：使用<resultmap>+<collection>做配置</collection></resultmap></strong></p>\n<h3 id=\"2-Mybatis的注解开发\">2.Mybatis的注解开发<a href=\"post/【Mybatis】多表查询-SSM整合#2-Mybatis的注解开发\"></a></h3><h4 id=\"2-1-MyBatis的常用注解\">2.1 MyBatis的常用注解<a href=\"post/【Mybatis】多表查询-SSM整合#2-1-MyBatis的常用注解\"></a></h4><p>这几年来注解开发越来越流行，Mybatis也可以使用注解开发方式，这样我们就可以减少编写Mapper</p>\n<p>映射文件了。我们先围绕一些基本的CRUD来学习，再学习复杂映射多表操作。</p>\n<p>@Insert：实现新增</p>\n<p>@Update：实现更新</p>\n<p>@Delete：实现删除</p>\n<p>@Select：实现查询</p>\n<p>@Result：实现结果集封装</p>\n<p>@Results：可以与@Result 一起使用，封装多个结果集</p>\n<p>@One：实现一对一结果集封装</p>\n<p>@Many：实现一对多结果集封装</p>\n<h4 id=\"2-2-MyBatis的增删改查\">2.2 MyBatis的增删改查<a href=\"post/【Mybatis】多表查询-SSM整合#2-2-MyBatis的增删改查\"></a></h4><p>我们完成简单的user表的增删改查的操作</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> UserMapper userMapper;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Before</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">before</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">    InputStream resourceAsStream = Resources.getResourceAsStream(<span class=\"string\">\"SqlMapConfig.xml\"</span>);</span><br><span class=\"line\">    SqlSessionFactory sqlSessionFactory = <span class=\"keyword\">new</span> </span><br><span class=\"line\">                 SqlSessionFactoryBuilder().build(resourceAsStream);</span><br><span class=\"line\">    SqlSession sqlSession = sqlSessionFactory.openSession(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">    userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testAdd</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    User user = <span class=\"keyword\">new</span> User();</span><br><span class=\"line\">    user.setUsername(<span class=\"string\">\"测试数据\"</span>);</span><br><span class=\"line\">    user.setPassword(<span class=\"string\">\"123\"</span>);</span><br><span class=\"line\">    user.setBirthday(<span class=\"keyword\">new</span> Date());</span><br><span class=\"line\">    userMapper.add(user);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testUpdate</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">    User user = <span class=\"keyword\">new</span> User();</span><br><span class=\"line\">    user.setId(<span class=\"number\">16</span>);</span><br><span class=\"line\">    user.setUsername(<span class=\"string\">\"测试数据修改\"</span>);</span><br><span class=\"line\">    user.setPassword(<span class=\"string\">\"abc\"</span>);</span><br><span class=\"line\">    user.setBirthday(<span class=\"keyword\">new</span> Date());</span><br><span class=\"line\">    userMapper.update(user);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testDelete</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">    userMapper.delete(<span class=\"number\">16</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testFindById</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">    User user = userMapper.findById(<span class=\"number\">1</span>);</span><br><span class=\"line\">    System.out.println(user);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testFindAll</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">    List&lt;User&gt; all = userMapper.findAll();</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(User user : all)&#123;</span><br><span class=\"line\">        System.out.println(user);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p>修改MyBatis的核心配置文件，我们使用了注解替代的映射文件，所以我们只需要加载使用了注解的Mapper接口即可</p>\n<figure class=\"highlight xml\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--扫描使用注解的类--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.itheima.mapper.UserMapper\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mappers</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<p>或者指定扫描包含映射关系的接口所在的包也可以</p>\n<figure class=\"highlight xml\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--扫描使用注解的类所在的包--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">package</span> <span class=\"attr\">name</span>=<span class=\"string\">\"com.itheima.mapper\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">package</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mappers</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<h4 id=\"2-3-MyBatis的注解实现复杂映射开发\">2.3 MyBatis的注解实现复杂映射开发<a href=\"post/【Mybatis】多表查询-SSM整合#2-3-MyBatis的注解实现复杂映射开发\"></a></h4><p>实现复杂关系映射之前我们可以在映射文件中通过配置<resultmap>来实现，使用注解开发后，我们可以使用@Results注解，@Result注解，@One注解，@Many注解组合完成复杂关系的配置</resultmap></p>\n<p><img src=\"https://i.loli.net/2019/09/09/LxYTydNhW7G5epO.png\" alt class=\"article-img\"></p>\n<p><img src=\"https://i.loli.net/2019/09/09/63zEjlWbtmTK84p.png\" alt class=\"article-img\"></p>\n<h4 id=\"2-4-一对一查询\">2.4 一对一查询<a href=\"post/【Mybatis】多表查询-SSM整合#2-4-一对一查询\"></a></h4><h5 id=\"2-4-1-一对一查询的模型\">2.4.1 一对一查询的模型<a href=\"post/【Mybatis】多表查询-SSM整合#2-4-1-一对一查询的模型\"></a></h5><p>用户表和订单表的关系为，一个用户有多个订单，一个订单只从属于一个用户</p>\n<p>一对一查询的需求：查询一个订单，与此同时查询出该订单所属的用户</p>\n<p><img src=\"https://i.loli.net/2019/09/09/WfIVcxw27ngQkPJ.png\" alt class=\"article-img\"></p>\n<h5 id=\"2-4-2-一对一查询的语句\">2.4.2 一对一查询的语句<a href=\"post/【Mybatis】多表查询-SSM整合#2-4-2-一对一查询的语句\"></a></h5><p>对应的sql语句：</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from orders;</span><br><span class=\"line\"></span><br><span class=\"line\">select * from user where id=查询出订单的uid;</span><br></pre></td></tr></table></div></figure>\n\n<p>查询的结果如下：</p>\n<p><img src=\"https://i.loli.net/2019/09/10/fRh8Cp2qbyiDkBu.png\" alt class=\"article-img\"></p>\n<h5 id=\"2-4-3-创建Order和User实体\">2.4.3 创建Order和User实体<a href=\"post/【Mybatis】多表查询-SSM整合#2-4-3-创建Order和User实体\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Order</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date ordertime;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">double</span> total;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//代表当前订单从属于哪一个客户</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> User user;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String username;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date birthday;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"2-4-4-创建OrderMapper接口\">2.4.4 创建OrderMapper接口<a href=\"post/【Mybatis】多表查询-SSM整合#2-4-4-创建OrderMapper接口\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">OrderMapper</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\">List&lt;Order&gt; <span class=\"title\">findAll</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"2-4-5-使用注解配置Mapper\">2.4.5 使用注解配置Mapper<a href=\"post/【Mybatis】多表查询-SSM整合#2-4-5-使用注解配置Mapper\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">OrderMapper</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Select</span>(<span class=\"string\">\"select * from orders\"</span>)</span><br><span class=\"line\">    <span class=\"meta\">@Results</span>(&#123;</span><br><span class=\"line\">            <span class=\"meta\">@Result</span>(id=<span class=\"keyword\">true</span>,property = <span class=\"string\">\"id\"</span>,column = <span class=\"string\">\"id\"</span>),</span><br><span class=\"line\">            <span class=\"meta\">@Result</span>(property = <span class=\"string\">\"ordertime\"</span>,column = <span class=\"string\">\"ordertime\"</span>),</span><br><span class=\"line\">            <span class=\"meta\">@Result</span>(property = <span class=\"string\">\"total\"</span>,column = <span class=\"string\">\"total\"</span>),</span><br><span class=\"line\">            <span class=\"meta\">@Result</span>(property = <span class=\"string\">\"user\"</span>,column = <span class=\"string\">\"uid\"</span>,</span><br><span class=\"line\">                    javaType = User.class,</span><br><span class=\"line\">                    one = <span class=\"meta\">@One</span>(select = <span class=\"string\">\"com.itheima.mapper.UserMapper.findById\"</span>))</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"function\">List&lt;Order&gt; <span class=\"title\">findAll</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UserMapper</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Select</span>(<span class=\"string\">\"select * from user where id=#&#123;id&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"function\">User <span class=\"title\">findById</span><span class=\"params\">(<span class=\"keyword\">int</span> id)</span></span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"2-4-6-测试结果\">2.4.6 测试结果<a href=\"post/【Mybatis】多表查询-SSM整合#2-4-6-测试结果\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testSelectOrderAndUser</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    List&lt;Order&gt; all = orderMapper.findAll();</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Order order : all)&#123;</span><br><span class=\"line\">        System.out.println(order);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p><img src=\"https://i.loli.net/2019/09/10/8IzhnyQJDVexPgM.png\" alt class=\"article-img\"></p>\n<h4 id=\"2-5-一对多查询\">2.5 一对多查询<a href=\"post/【Mybatis】多表查询-SSM整合#2-5-一对多查询\"></a></h4><h5 id=\"2-5-1-一对多查询的模型\">2.5.1 一对多查询的模型<a href=\"post/【Mybatis】多表查询-SSM整合#2-5-1-一对多查询的模型\"></a></h5><p>用户表和订单表的关系为，一个用户有多个订单，一个订单只从属于一个用户</p>\n<p>一对多查询的需求：查询一个用户，与此同时查询出该用户具有的订单</p>\n<p><img src=\"https://i.loli.net/2019/09/09/WfIVcxw27ngQkPJ.png\" alt class=\"article-img\"></p>\n<h5 id=\"2-5-2-一对多查询的语句\">2.5.2 一对多查询的语句<a href=\"post/【Mybatis】多表查询-SSM整合#2-5-2-一对多查询的语句\"></a></h5><p>对应的sql语句：</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from user;</span><br><span class=\"line\"></span><br><span class=\"line\">select * from orders where uid=查询出用户的id;</span><br></pre></td></tr></table></div></figure>\n\n<p>查询的结果如下：</p>\n<p><img src=\"https://i.loli.net/2019/09/10/ioALnMWY9y42aRb.png\" alt class=\"article-img\"></p>\n<h5 id=\"2-5-3-修改User实体\">2.5.3 修改User实体<a href=\"post/【Mybatis】多表查询-SSM整合#2-5-3-修改User实体\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Order</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date ordertime;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">double</span> total;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//代表当前订单从属于哪一个客户</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> User user;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String username;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date birthday;</span><br><span class=\"line\">    <span class=\"comment\">//代表当前用户具备哪些订单</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Order&gt; orderList;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"2-5-4-创建UserMapper接口\">2.5.4 创建UserMapper接口<a href=\"post/【Mybatis】多表查询-SSM整合#2-5-4-创建UserMapper接口\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">List&lt;User&gt; <span class=\"title\">findAllUserAndOrder</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"2-5-5-使用注解配置Mapper\">2.5.5 使用注解配置Mapper<a href=\"post/【Mybatis】多表查询-SSM整合#2-5-5-使用注解配置Mapper\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UserMapper</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Select</span>(<span class=\"string\">\"select * from user\"</span>)</span><br><span class=\"line\">    <span class=\"meta\">@Results</span>(&#123;</span><br><span class=\"line\">            <span class=\"meta\">@Result</span>(id = <span class=\"keyword\">true</span>,property = <span class=\"string\">\"id\"</span>,column = <span class=\"string\">\"id\"</span>),</span><br><span class=\"line\">            <span class=\"meta\">@Result</span>(property = <span class=\"string\">\"username\"</span>,column = <span class=\"string\">\"username\"</span>),</span><br><span class=\"line\">            <span class=\"meta\">@Result</span>(property = <span class=\"string\">\"password\"</span>,column = <span class=\"string\">\"password\"</span>),</span><br><span class=\"line\">            <span class=\"meta\">@Result</span>(property = <span class=\"string\">\"birthday\"</span>,column = <span class=\"string\">\"birthday\"</span>),</span><br><span class=\"line\">            <span class=\"meta\">@Result</span>(property = <span class=\"string\">\"orderList\"</span>,column = <span class=\"string\">\"id\"</span>,</span><br><span class=\"line\">                    javaType = List.class,</span><br><span class=\"line\">                    many = <span class=\"meta\">@Many</span>(select = <span class=\"string\">\"com.itheima.mapper.OrderMapper.findByUid\"</span>))</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"function\">List&lt;User&gt; <span class=\"title\">findAllUserAndOrder</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">OrderMapper</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Select</span>(<span class=\"string\">\"select * from orders where uid=#&#123;uid&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"function\">List&lt;Order&gt; <span class=\"title\">findByUid</span><span class=\"params\">(<span class=\"keyword\">int</span> uid)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"2-5-6-测试结果\">2.5.6 测试结果<a href=\"post/【Mybatis】多表查询-SSM整合#2-5-6-测试结果\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;User&gt; all = userMapper.findAllUserAndOrder();</span><br><span class=\"line\"><span class=\"keyword\">for</span>(User user : all)&#123;</span><br><span class=\"line\">    System.out.println(user.getUsername());</span><br><span class=\"line\">    List&lt;Order&gt; orderList = user.getOrderList();</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Order order : orderList)&#123;</span><br><span class=\"line\">        System.out.println(order);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"-----------------------------\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p><img src=\"https://i.loli.net/2019/09/10/yGPEX4QieNDMUdA.png\" alt class=\"article-img\"></p>\n<h4 id=\"2-6-多对多查询\">2.6 多对多查询<a href=\"post/【Mybatis】多表查询-SSM整合#2-6-多对多查询\"></a></h4><h5 id=\"2-6-1-多对多查询的模型\">2.6.1 多对多查询的模型<a href=\"post/【Mybatis】多表查询-SSM整合#2-6-1-多对多查询的模型\"></a></h5><p>用户表和角色表的关系为，一个用户有多个角色，一个角色被多个用户使用</p>\n<p>多对多查询的需求：查询用户同时查询出该用户的所有角色</p>\n<p><img src=\"https://i.loli.net/2019/09/09/NjtqgYfCv18zIyo.png\" alt class=\"article-img\"></p>\n<h5 id=\"2-6-2-多对多查询的语句\">2.6.2 多对多查询的语句<a href=\"post/【Mybatis】多表查询-SSM整合#2-6-2-多对多查询的语句\"></a></h5><p>对应的sql语句：</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from user;</span><br><span class=\"line\"></span><br><span class=\"line\">select * from role r,user_role ur where r.id=ur.role_id and ur.user_id=用户的id</span><br></pre></td></tr></table></div></figure>\n\n<p>查询的结果如下：</p>\n<p><img src=\"https://i.loli.net/2019/09/10/DOskAfTa3EW6p5G.png\" alt class=\"article-img\"></p>\n<h5 id=\"2-6-3-创建Role实体，修改User实体\">2.6.3 创建Role实体，修改User实体<a href=\"post/【Mybatis】多表查询-SSM整合#2-6-3-创建Role实体，修改User实体\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String username;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date birthday;</span><br><span class=\"line\">    <span class=\"comment\">//代表当前用户具备哪些订单</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Order&gt; orderList;</span><br><span class=\"line\">    <span class=\"comment\">//代表当前用户具备哪些角色</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Role&gt; roleList;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Role</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String rolename;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"2-6-4-添加UserMapper接口方法\">2.6.4 添加UserMapper接口方法<a href=\"post/【Mybatis】多表查询-SSM整合#2-6-4-添加UserMapper接口方法\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">List&lt;User&gt; <span class=\"title\">findAllUserAndRole</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"2-6-5-使用注解配置Mapper\">2.6.5 使用注解配置Mapper<a href=\"post/【Mybatis】多表查询-SSM整合#2-6-5-使用注解配置Mapper\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UserMapper</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Select</span>(<span class=\"string\">\"select * from user\"</span>)</span><br><span class=\"line\">    <span class=\"meta\">@Results</span>(&#123;</span><br><span class=\"line\">        <span class=\"meta\">@Result</span>(id = <span class=\"keyword\">true</span>,property = <span class=\"string\">\"id\"</span>,column = <span class=\"string\">\"id\"</span>),</span><br><span class=\"line\">        <span class=\"meta\">@Result</span>(property = <span class=\"string\">\"username\"</span>,column = <span class=\"string\">\"username\"</span>),</span><br><span class=\"line\">        <span class=\"meta\">@Result</span>(property = <span class=\"string\">\"password\"</span>,column = <span class=\"string\">\"password\"</span>),</span><br><span class=\"line\">        <span class=\"meta\">@Result</span>(property = <span class=\"string\">\"birthday\"</span>,column = <span class=\"string\">\"birthday\"</span>),</span><br><span class=\"line\">        <span class=\"meta\">@Result</span>(property = <span class=\"string\">\"roleList\"</span>,column = <span class=\"string\">\"id\"</span>,</span><br><span class=\"line\">                javaType = List.class,</span><br><span class=\"line\">                many = <span class=\"meta\">@Many</span>(select = <span class=\"string\">\"com.itheima.mapper.RoleMapper.findByUid\"</span>))</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"function\">List&lt;User&gt; <span class=\"title\">findAllUserAndRole</span><span class=\"params\">()</span></span>;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">RoleMapper</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Select</span>(<span class=\"string\">\"select * from role r,user_role ur where r.id=ur.role_id and ur.user_id=#&#123;uid&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"function\">List&lt;Role&gt; <span class=\"title\">findByUid</span><span class=\"params\">(<span class=\"keyword\">int</span> uid)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"2-6-6-测试结果\">2.6.6 测试结果<a href=\"post/【Mybatis】多表查询-SSM整合#2-6-6-测试结果\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class=\"line\">List&lt;User&gt; all = mapper.findAllUserAndRole();</span><br><span class=\"line\"><span class=\"keyword\">for</span>(User user : all)&#123;</span><br><span class=\"line\">    System.out.println(user.getUsername());</span><br><span class=\"line\">    List&lt;Role&gt; roleList = user.getRoleList();</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Role role : roleList)&#123;</span><br><span class=\"line\">        System.out.println(role);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"----------------------------------\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p><img src=\"https://i.loli.net/2019/09/10/XCfyR4na3uAFh8b.png\" alt class=\"article-img\"></p>\n<h3 id=\"SSM框架整合\">SSM框架整合<a href=\"post/【Mybatis】多表查询-SSM整合#SSM框架整合\"></a></h3><h4 id=\"1-1-原始方式整合\">1.1 原始方式整合<a href=\"post/【Mybatis】多表查询-SSM整合#1-1-原始方式整合\"></a></h4><h5 id=\"1-准备工作\">1.准备工作<a href=\"post/【Mybatis】多表查询-SSM整合#1-准备工作\"></a></h5><p><img src=\"https://i.loli.net/2019/09/10/ZUPXnzQ9E2asjqf.png\" alt class=\"article-img\"></p>\n<h5 id=\"2-创建Maven工程\">2.创建Maven工程<a href=\"post/【Mybatis】多表查询-SSM整合#2-创建Maven工程\"></a></h5><p><img src=\"https://i.loli.net/2019/09/10/jFAG4fdzraVJmbH.png\" alt class=\"article-img\"></p>\n<h5 id=\"3-导入Maven坐标\">3.导入Maven坐标<a href=\"post/【Mybatis】多表查询-SSM整合#3-导入Maven坐标\"></a></h5><p>参考：<strong>素材/配置文件/pom.xml文件</strong></p>\n<h5 id=\"4-编写实体类\">4.编写实体类<a href=\"post/【Mybatis】多表查询-SSM整合#4-编写实体类\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Account</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">double</span> money;</span><br><span class=\"line\">    <span class=\"comment\">//省略getter和setter方法</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"5-编写Mapper接口\">5.编写Mapper接口<a href=\"post/【Mybatis】多表查询-SSM整合#5-编写Mapper接口\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">AccountMapper</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//保存账户数据</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">(Account account)</span></span>;</span><br><span class=\"line\">    <span class=\"comment\">//查询账户数据</span></span><br><span class=\"line\">    <span class=\"function\">List&lt;Account&gt; <span class=\"title\">findAll</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"6-编写Service接口\">6.编写Service接口<a href=\"post/【Mybatis】多表查询-SSM整合#6-编写Service接口\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">AccountService</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">(Account account)</span></span>; <span class=\"comment\">//保存账户数据</span></span><br><span class=\"line\">    <span class=\"function\">List&lt;Account&gt; <span class=\"title\">findAll</span><span class=\"params\">()</span></span>; <span class=\"comment\">//查询账户数据</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"7-编写Service接口实现\">7.编写Service接口实现<a href=\"post/【Mybatis】多表查询-SSM整合#7-编写Service接口实现\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service</span>(<span class=\"string\">\"accountService\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AccountServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">AccountService</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">(Account account)</span> </span>&#123;</span><br><span class=\"line\">        SqlSession sqlSession = MyBatisUtils.openSession();</span><br><span class=\"line\">        AccountMapper accountMapper = sqlSession.getMapper(AccountMapper.class);</span><br><span class=\"line\">        accountMapper.save(account);</span><br><span class=\"line\">        sqlSession.commit();</span><br><span class=\"line\">        sqlSession.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;Account&gt; <span class=\"title\">findAll</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        SqlSession sqlSession = MyBatisUtils.openSession();</span><br><span class=\"line\">        AccountMapper accountMapper = sqlSession.getMapper(AccountMapper.class);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> accountMapper.findAll();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"8-编写Controller\">8.编写Controller<a href=\"post/【Mybatis】多表查询-SSM整合#8-编写Controller\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Controller</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AccountController</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> AccountService accountService;</span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(<span class=\"string\">\"/save\"</span>)</span><br><span class=\"line\">    <span class=\"meta\">@ResponseBody</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">save</span><span class=\"params\">(Account account)</span></span>&#123;</span><br><span class=\"line\">        accountService.save(account);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"save success\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(<span class=\"string\">\"/findAll\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ModelAndView <span class=\"title\">findAll</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        ModelAndView modelAndView = <span class=\"keyword\">new</span> ModelAndView();</span><br><span class=\"line\">        modelAndView.setViewName(<span class=\"string\">\"accountList\"</span>);</span><br><span class=\"line\">        modelAndView.addObject(<span class=\"string\">\"accountList\"</span>,accountService.findAll());</span><br><span class=\"line\">        <span class=\"keyword\">return</span> modelAndView;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"9-编写添加页面\">9.编写添加页面<a href=\"post/【Mybatis】多表查询-SSM整合#9-编写添加页面\"></a></h5><figure class=\"highlight html\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%@</span> <span class=\"attr\">page</span> <span class=\"attr\">contentType</span>=<span class=\"string\">\"text/html;charset=UTF-8\"</span> <span class=\"attr\">language</span>=<span class=\"string\">\"java\"</span> %&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Title<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>保存账户信息表单<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">\"$&#123;pageContext.request.contextPath&#125;/save.action\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"post\"</span>&gt;</span></span><br><span class=\"line\">        用户名称<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></span><br><span class=\"line\">        账户金额<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"money\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"submit\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"保存\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"10-编写列表页面\">10.编写列表页面<a href=\"post/【Mybatis】多表查询-SSM整合#10-编写列表页面\"></a></h5><figure class=\"highlight html\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">table</span> <span class=\"attr\">border</span>=<span class=\"string\">\"1\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>账户id<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>账户名称<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>账户金额<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">c:forEach</span> <span class=\"attr\">items</span>=<span class=\"string\">\"$&#123;accountList&#125;\"</span> <span class=\"attr\">var</span>=<span class=\"string\">\"account\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>$&#123;account.id&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>$&#123;account.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>$&#123;account.money&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">c:forEach</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"11-编写相应配置文件-文件参考目录：素材-配置文件\">11.编写相应配置文件(文件参考目录：素材/配置文件)<a href=\"post/【Mybatis】多表查询-SSM整合#11-编写相应配置文件-文件参考目录：素材-配置文件\"></a></h5><p>•Spring配置文件：<a href=\"配置文件/applicationContext.xml\">applicationContext.xml</a></p>\n<p>•SprngMVC配置文件：<a href=\"配置文件/spring-mvc.xml\">spring-mvc.xml</a></p>\n<p>•MyBatis映射文件：<a href=\"配置文件/AccountMapper.xml\">AccountMapper.xml</a></p>\n<p>•MyBatis核心文件：<a href=\"配置文件/sqlMapConfig.xml\">sqlMapConfig.xml</a></p>\n<p>•数据库连接信息文件：<a href=\"配置文件/jdbc.properties\">jdbc.properties</a></p>\n<p>•Web.xml文件：<a href=\"配置文件/web.xml\">web.xml</a></p>\n<p>•日志文件：[log4j.xml](</p>\n<h5 id=\"12-测试添加账户\">12.测试添加账户<a href=\"post/【Mybatis】多表查询-SSM整合#12-测试添加账户\"></a></h5><p><img src=\"https://i.loli.net/2019/09/10/FgcsCrqvOYA1JPw.png\" alt class=\"article-img\"></p>\n<h5 id=\"13-测试账户列表\">13.测试账户列表<a href=\"post/【Mybatis】多表查询-SSM整合#13-测试账户列表\"></a></h5><p><img src=\"https://i.loli.net/2019/09/10/IyFMmcdhxaVXfp2.png\" alt class=\"article-img\"></p>\n<h4 id=\"1-2-Spring整合MyBatis\">1.2 Spring整合MyBatis<a href=\"post/【Mybatis】多表查询-SSM整合#1-2-Spring整合MyBatis\"></a></h4><h5 id=\"1-整合思路\">1.整合思路<a href=\"post/【Mybatis】多表查询-SSM整合#1-整合思路\"></a></h5><p><img src=\"https://i.loli.net/2019/09/10/L3rJPMcBmZUvXHE.png\" alt class=\"article-img\"></p>\n<h5 id=\"2-将SqlSessionFactory配置到Spring容器中\">2.将SqlSessionFactory配置到Spring容器中<a href=\"post/【Mybatis】多表查询-SSM整合#2-将SqlSessionFactory配置到Spring容器中\"></a></h5><figure class=\"highlight xml\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--加载jdbc.properties--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">context:property-placeholder</span> <span class=\"attr\">location</span>=<span class=\"string\">\"classpath:jdbc.properties\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--配置数据源--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.mchange.v2.c3p0.ComboPooledDataSource\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driverClass\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc.driver&#125;\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"jdbcUrl\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc.url&#125;\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"user\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc.username&#125;\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc.password&#125;\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--配置MyBatis的SqlSessionFactory--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"sqlSessionFactory\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.mybatis.spring.SqlSessionFactoryBean\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"dataSource\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"configLocation\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"classpath:sqlMapConfig.xml\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"3-扫描Mapper，让Spring容器产生Mapper实现类\">3.扫描Mapper，让Spring容器产生Mapper实现类<a href=\"post/【Mybatis】多表查询-SSM整合#3-扫描Mapper，让Spring容器产生Mapper实现类\"></a></h5><figure class=\"highlight xml\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--配置Mapper扫描--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.mybatis.spring.mapper.MapperScannerConfigurer\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"basePackage\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"com.itheima.mapper\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"4-配置声明式事务控制\">4.配置声明式事务控制<a href=\"post/【Mybatis】多表查询-SSM整合#4-配置声明式事务控制\"></a></h5><figure class=\"highlight xml\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--配置声明式事务控制--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"transacionManager\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"dataSource\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">tx:advice</span> <span class=\"attr\">id</span>=<span class=\"string\">\"txAdvice\"</span> <span class=\"attr\">transaction-manager</span>=<span class=\"string\">\"transacionManager\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tx:attributes</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">tx:method</span> <span class=\"attr\">name</span>=<span class=\"string\">\"*\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tx:attributes</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">tx:advice</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:config</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">aop:pointcut</span> <span class=\"attr\">id</span>=<span class=\"string\">\"txPointcut\"</span> <span class=\"attr\">expression</span>=<span class=\"string\">\"execution(* com.itheima.service.impl.*.*(..))\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">aop:advisor</span> <span class=\"attr\">advice-ref</span>=<span class=\"string\">\"txAdvice\"</span> <span class=\"attr\">pointcut-ref</span>=<span class=\"string\">\"txPointcut\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">aop:config</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<h5 id=\"5-修改Service实现类代码\">5.修改Service实现类代码<a href=\"post/【Mybatis】多表查询-SSM整合#5-修改Service实现类代码\"></a></h5><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service</span>(<span class=\"string\">\"accountService\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AccountServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">AccountService</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> AccountMapper accountMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">(Account account)</span> </span>&#123;</span><br><span class=\"line\">        accountMapper.save(account);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;Account&gt; <span class=\"title\">findAll</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> accountMapper.findAll();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n","prev":{"title":"IntelliJ IDEA 快捷键大全","link":"post/IDEA快捷键"},"next":{"title":"【Mybatis】动态SQL&核心配置文件","link":"post/【Mybatis】动态SQL-核心配置文件"},"plink":"https://gmahsm.github.io/post/【Mybatis】多表查询-SSM整合/","reward":true,"copyright":{"custom":"copyright:自由转载-非商用-禁止演绎-保持署名"}}